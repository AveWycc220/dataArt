<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tree on Canvas</title>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        class Tree {
          constructor({canvasId='#canvas', width=1200, height=720, random=true} = {}) {
            const canvas = document.querySelector(`${canvasId}`)
            canvas.setAttribute('width', `${width}`)
            canvas.setAttribute('height', `${height}`)
            const context2D = canvas.getContext('2d')
            const size = Math.round((width/height) * 12)
            this._drawTree(context2D, Math.round(width/2), height-100, -90, 7, random, size)
          }

          _drawLine(context, x1, y1, x2, y2, random, color) {
            const maxRand = random ? 10 : undefined
            context.beginPath()
            context.lineWidth = 2
            context.moveTo(x1, y1)
            if (random) {
              context.bezierCurveTo(x1 + Randomizer.getRandom(0, maxRand), y1 + Randomizer.getRandom(0, maxRand),
                x2 + Randomizer.getRandom(0, maxRand), y2 + Randomizer.getRandom(0, maxRand), x2, y2)
            } else {
              context.bezierCurveTo(x2 + 10, y2 + 10, x2 + 10, y2 + 10, x2, y2)
            }
            context.fillStyle = color
            context.strokeStyle = color
            context.fill()
            context.closePath()
            context.stroke()
          }

          _drawTree(context, x1, y1, r, count, random, size) {
            if (count !== 0) {
              console.log(size)
              const minR = random ? 5 : undefined
              const maxR = random ? 50 : undefined
              const maxSteps = random ? 4 : undefined
              const x2 = x1 + (Math.cos(r * (Math.PI / 180)) * count * size)
              const y2 = y1 + (Math.sin(r * (Math.PI / 180)) * count * size)
              for (let i = 0; i < (random ? Math.round(Randomizer.getRandom(2, maxSteps)) : 2); i++) {
                if (i % 2 === 0) {
                  this._drawTree(context, x2, y2, r - (random ? Randomizer.getRandom(minR, maxR) : 25),
                    count - 1, random, size)
                } else {
                  this._drawTree(context, x2, y2, r + (random ? Randomizer.getRandom(minR, maxR) : 25),
                    count - 1, random, size)
                }
              }
              this._drawLine(context, x1, y1, x2, y2, random, count < 5 ? 'green' : 'black')
            }
          }
        }

        class Randomizer {
          static getRandom(min, max) {
            return Math.random() * (max - min) + min;
          }
        }

        new Tree()
    </script>
</body>
</html>